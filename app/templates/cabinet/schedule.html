<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–ø–∏—Å–∞—Ç–∏—Å—å –Ω–∞ –ø—Ä–∏–π–æ–º</title>
    <link rel="stylesheet" href="../static/css/cabinet-style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <span class="clinic-name">Crystal Smile</span>
        <div class="navbar-links">
            <a href="/home">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="/cabinet">–ö–∞–±—ñ–Ω–µ—Ç</a>
            <a href="/services">–ü–æ—Å–ª—É–≥–∏</a>
            <a href="/about">–ü—Ä–æ –Ω–∞—Å</a>
            <a href="/contact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
            <a href="/review">–í—ñ–¥–≥—É–∫–∏</a>
            <a href="/doctors">–õ—ñ–∫–∞—Ä—ñ</a>
        </div>
    </header>

    <main class="main-schedule">
        <aside class="sidebar">
            <ul>
                <li><a href="/cabinet">–ì–æ–ª–æ–≤–Ω–∞</a></li>
                <li><a href="">–ó–∞–ø–∏—Å –Ω–∞ –ø—Ä–∏–π–æ–º</a></li>
                <li><a href="/cabinet/settings">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é</a></li>
            </ul>
            <div class="logout">
                <a href="/logout">–í–∏—Ö—ñ–¥</a>
            </div>
        </aside>

        <div class="schedule-form">
            <h2>–ó–∞–ø–∏—Å–∞—Ç–∏—Å—å –Ω–∞ –ø—Ä–∏–π–æ–º</h2>
            <form method="POST">
                <div class="schedule-form-group">
                    <label for="name">–í–∞—à–µ —ñ–º'—è</label>
                    <input type="text" id="name" name="name" required placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º'—è" value="{{ name }}">
                </div>
                <div class="schedule-form-group">
                    <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="tel" id="phone" name="phone" required placeholder="–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω" value="{{ phone }}">
                </div>
                <div class="schedule-form-group">
                    <label for="datetime">–ë–∞–∂–∞–Ω–∞ –¥–∞—Ç–∞ —ñ —á–∞—Å</label>
                    <input type="datetime-local" id="datetime" name="datetime" required>
                </div>
                <div class="schedule-form-group">
                    <label for="doctor">–õ—ñ–∫–∞—Ä</label>
                    <select id="doctor" name="doctor" required>
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –õ—ñ–∫–∞—Ä—è</option>
                    </select>
                </div>
                <div class="schedule-form-group">
                    <label for="clinica">–ö–ª—ñ–Ω—ñ–∫–∞</label>
                    <select id="clinica" name="clinica" required>
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –ö–ª—ñ–Ω—ñ–∫—É</option>
                    </select>
                </div>
                <button type="submit" class="submit-btn">–ó–∞–ø–∏—Å–∞—Ç–∏—Å—å</button>
            </form>

        </div>

        <!-- –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å—ñ–≤ -->
<div class="schedule-appointment">
    <h2>–í–∞—à—ñ –∑–∞–ø–∏—Å–∏</h2>
    {% if appointments %}
        <div class="appointments-list">
            {% for appointment in appointments %}
                {% set is_past = appointment.is_past %}
                <div class="appointment-card {% if is_past %} past-appointment {% endif %}">
                    <div class="appointment-info">
                        <p><strong>{{ appointment.name }}</strong></p>
                        <p>{{ appointment.date.strftime('%d.%m.%Y %H:%M') }}</p>
                        <p>–õ—ñ–∫–∞—Ä: {{ appointment.doctor_name }}</p>
                        <p>–ö–ª—ñ–Ω—ñ–∫–∞: {{ appointment.clinic_name }}</p>
                    </div>
                    <div class="appointment-actions">
                        <button class="edit-btn"
                            data-id="{{ appointment.id }}"
                            data-datetime-edit="{{ appointment.date.strftime('%Y-%m-%dT%H:%M') }}"
                            data-doctor-edit="{{ appointment.doctor_name }}"
                            data-clinic-edit="{{ appointment.clinic_name }}">
                            –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
                        </button>

                        <!-- –§–æ—Ä–º–∞ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É -->
                        <form action="{{ url_for('cabinet.delete_appointment', appointment_id=appointment.id) }}" method="POST">
                            <button type="submit" class="delete-btn" onclick="return confirm('–í–∏ –¥—ñ–π—Å–Ω–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –∑–∞–ø–∏—Å?')">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>–ù–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤.</p>
    {% endif %}
</div>




        <!-- –ü–ª–∞—à–∫–∞ –∑ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è–º–∏ -->
        <div class="schedule-notification">
            <h2>–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è</h2>

            <div class="schedule-notification-item">
                <label>SMS –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è</label>
                <button class="toggle-btn {{ 'enabled' if current_user.sms_notifications else 'disabled' }}"
                        data-type="sms"
                        data-status="{{ 'enabled' if current_user.sms_notifications else 'disabled' }}">
                    {{ '–í–∫–ª—é—á–µ–Ω–æ' if current_user.sms_notifications else '–í–∏–∫–ª—é—á–µ–Ω–æ' }}
                </button>
            </div>

            <div class="schedule-notification-item">
                <label>Viber –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è</label>
                <button class="toggle-btn {{ 'enabled' if current_user.viber_notifications else 'disabled' }}"
                        data-type="viber"
                        data-status="{{ 'enabled' if current_user.viber_notifications else 'disabled' }}">
                    {{ '–í–∫–ª—é—á–µ–Ω–æ' if current_user.viber_notifications else '–í–∏–∫–ª—é—á–µ–Ω–æ' }}
                </button>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
        <div class="modal" id="editModal">
            <div class="modal-content">
                <span class="close-btn" id="closeModal">&times;</span>
                <h2>–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Å—É</h2>
                <form id="editForm" data-appointment-id="">
                    <div class="form-group">
                        <label for="datetime-edit">–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞—Ç—É</label>
                        <input type="datetime-local" id="datetime-edit" name="datetime-edit" required>
                    </div>
                    <div class="form-group">
                        <label for="doctor-edit">–ó–º—ñ–Ω–∏—Ç–∏ –ª—ñ–∫–∞—Ä—è</label>
                        <select id="doctor-edit" name="doctor-edit" required>
                            <option value="">–û–±–µ—Ä—ñ—Ç—å –õ—ñ–∫–∞—Ä—è</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="clinic-edit">–ó–º—ñ–Ω–∏—Ç–∏ –∫–ª—ñ–Ω—ñ–∫—É</label>
                        <select id="clinic-edit" name="clinic-edit" required>
                            <option value="1">–í–ù–¢–£ –ö–æ—Ä–ø—É—Å 1</option>
                            <option value="2">–í–ù–¢–£ –ö–æ—Ä–ø—É—Å 2</option>
                            <option value="3">–í–ù–¢–£ –ö–æ—Ä–ø—É—Å 5</option>
                        </select>
                    </div>
                    <div class="form-buttons">
                        <button type="button" class="cancel-btn" id="cancelBtn">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                        <button type="submit" class="save-btn">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-container">
            <!-- –õ—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
            <div class="footer-left">
                <p>
                    <span class="footer-icon">üìç</span> –ö–∏—ó–≤, –≤—É–ª. –Ñ–ª–∏–∑–∞–≤–µ—Ç–∏ –ß–∞–≤–¥–∞—Ä, 7
                </p>
            </div>

            <!-- –ü—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
            <div class="footer-right">
                <p>
                    <span class="footer-phone">0 800 441 523</span><br>
                    <span class="footer-note">–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ</span><br>
                    <a href="mailto:dentart.contact@gmail.com" class="footer-email">dentart.contact@gmail.com</a>
                </p>
            </div>
        </div>

        <!-- –ù–∏–∑ -->
        <div class="footer-bottom">
            <p>¬© 2024 –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ</p>
        </div>
    </footer>
<script src="../static/js/cabinet.js"></script>
</body>
</html>